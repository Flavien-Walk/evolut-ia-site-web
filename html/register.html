<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription - Evolut'IA | Cr√©ez votre compte</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/register.css">
    <link rel="stylesheet" href="../css/scrollbar.css">
    <script src="../script/auth.js" defer></script>
</head>
<body>
    <div class="auth-container">
        <!-- Section gauche - Branding -->
        <div class="auth-left">
            <div class="brand-section">
                <div class="brand-header">
                    <img src="../images/Logo_noir_Evolut_IA.png" alt="Logo Evolut'IA" class="logo">
                    <div class="brand-text">
                        <h1>Commencez votre transformation !</h1>
                        <p>Rejoignez des milliers d'√©tudiants qui ont d√©j√† choisi l'excellence avec Evolut'IA</p>
                    </div>
                </div>
                
                <div class="auth-benefits">
                    <div class="benefit-item">
                        <div class="benefit-icon">‚≠ê</div>
                        <div class="benefit-text">
                            <h4>7 jours gratuits</h4>
                            <p>Testez toutes les fonctionnalit√©s sans engagement</p>
                        </div>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon">ü§ñ</div>
                        <div class="benefit-text">
                            <h4>IA personnalis√©e</h4>
                            <p>Apprentissage adapt√© √† votre rythme</p>
                        </div>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon">üìà</div>
                        <div class="benefit-text">
                            <h4>R√©sultats garantis</h4>
                            <p>97% de nos utilisateurs progressent</p>
                        </div>
                    </div>
                </div>
                
                <div class="auth-visual">
                    <img src="../images/student-illustration.png" alt="Illustration √©tudiant">
                    <div class="visual-overlay">
                        <div class="success-stats">
                            <div class="stat-item">
                                <span class="stat-number">10k+</span>
                                <span class="stat-label">nouveaux utilisateurs</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">4.9/5</span>
                                <span class="stat-label">satisfaction</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section droite - Formulaire -->
        <div class="auth-right">
            <div class="auth-form-container">
                <div class="form-header">
                    <h2>Cr√©er un compte</h2>
                    <p>D√©j√† inscrit ? <a href="login.html" class="switch-link">Connectez-vous</a></p>
                </div>

                <form id="register-form" class="auth-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">Pr√©nom</label>
                            <div class="input-container">
                                <input type="text" id="firstName" name="firstName" placeholder="Votre pr√©nom" required>
                                <div class="input-icon">‚Ä¢</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Nom</label>
                            <div class="input-container">
                                <input type="text" id="lastName" name="lastName" placeholder="Votre nom" required>
                                <div class="input-icon">‚Ä¢</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email">Adresse email</label>
                        <div class="input-container">
                            <input type="email" id="email" name="email" placeholder="votre@email.com" required>
                            <div class="input-icon">@</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="phone">T√©l√©phone (optionnel)</label>
                        <div class="input-container">
                            <input type="tel" id="phone" name="phone" placeholder="+33 6 12 34 56 78">
                            <div class="input-icon">‚òé</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="level">Niveau d'√©tudes</label>
                        <div class="input-container">
                            <select id="level" name="level" required>
                                <option value="">S√©lectionnez votre niveau</option>
                                <option value="college">Coll√®ge</option>
                                <option value="lycee">Lyc√©e</option>
                                <option value="superieur">√âtudes sup√©rieures</option>
                                <option value="professionnel">Professionnel</option>
                                <option value="autre">Autre</option>
                            </select>
                            <div class="input-icon">‚ñº</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="password">Mot de passe</label>
                        <div class="input-container">
                            <input type="password" id="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="8">
                            <button type="button" class="toggle-password" aria-label="Afficher le mot de passe">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                    <path d="M1 12S5 4 12 4s11 8 11 8-4 8-11 8S1 12 1 12z" stroke="currentColor" stroke-width="2"/>
                                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </button>
                        </div>
                        <div class="password-strength">
                            <div class="strength-bar">
                                <div class="strength-fill"></div>
                            </div>
                            <span class="strength-text">Choisissez un mot de passe fort</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Confirmer le mot de passe</label>
                        <div class="input-container">
                            <input type="password" id="confirmPassword" name="confirmPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                            <div class="input-icon">‚úì</div>
                        </div>
                    </div>

                    <div class="form-options">
                        <label class="agreement">
                            <input type="checkbox" id="terms" required>
                            <span class="checkmark"></span>
                            <span class="agreement-text">J'accepte les <a href="#" target="_blank">conditions d'utilisation</a> et la <a href="#" target="_blank">politique de confidentialit√©</a></span>
                        </label>
                        <label class="newsletter">
                            <input type="checkbox" id="newsletter" checked>
                            <span class="checkmark"></span>
                            <span class="newsletter-text">Recevoir les actualit√©s et conseils par email</span>
                        </label>
                    </div>

                    <button type="submit" class="auth-btn primary">
                        <span>Cr√©er mon compte</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </form>

                <div class="divider">
                    <span>ou s'inscrire avec</span>
                </div>

                <div class="social-auth">
                    <button class="social-btn google">
                        <img src="../images/google.png" alt="Google">
                        <span>Google</span>
                    </button>
                    <button class="social-btn facebook">
                        <img src="../images/facebook.png" alt="Facebook">
                        <span>Facebook</span>
                    </button>
                    <button class="social-btn apple">
                        <img src="../images/apple.png" alt="Apple">
                        <span>Apple</span>
                    </button>
                </div>

                <div class="back-home">
                    <a href="/index.html" class="back-link">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Retour √† l'accueil
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Password strength checker
        function checkPasswordStrength(password) {
            let strength = 0;
            let feedback = '';
            
            if (password.length >= 8) strength += 1;
            if (/[a-z]/.test(password)) strength += 1;
            if (/[A-Z]/.test(password)) strength += 1;
            if (/[0-9]/.test(password)) strength += 1;
            if (/[^A-Za-z0-9]/.test(password)) strength += 1;
            
            switch(strength) {
                case 0:
                case 1:
                    feedback = 'Mot de passe trop faible';
                    break;
                case 2:
                    feedback = 'Mot de passe faible';
                    break;
                case 3:
                    feedback = 'Mot de passe moyen';
                    break;
                case 4:
                    feedback = 'Mot de passe fort';
                    break;
                case 5:
                    feedback = 'Mot de passe tr√®s fort';
                    break;
            }
            
            return { strength, feedback };
        }

        // Password strength indicator
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const result = checkPasswordStrength(password);
            const strengthFill = document.querySelector('.strength-fill');
            const strengthText = document.querySelector('.strength-text');
            
            const percentage = (result.strength / 5) * 100;
            strengthFill.style.width = percentage + '%';
            strengthText.textContent = result.feedback;
            
            // Color coding
            strengthFill.className = 'strength-fill';
            if (result.strength <= 2) {
                strengthFill.classList.add('weak');
            } else if (result.strength <= 3) {
                strengthFill.classList.add('medium');
            } else {
                strengthFill.classList.add('strong');
            }
        });

        // Password confirmation validation
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;
            const container = this.parentElement;
            
            if (confirmPassword && password !== confirmPassword) {
                container.classList.add('error');
            } else {
                container.classList.remove('error');
            }
        });

        // Toggle password visibility
        document.querySelector('.toggle-password').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            
            // Toggle icon
            const icon = this.querySelector('svg');
            if (type === 'text') {
                icon.innerHTML = `
                    <path d="M1 12S5 4 12 4s11 8 11 8-4 8-11 8S1 12 1 12z" stroke="currentColor" stroke-width="2"/>
                    <path d="M21 4L3 20" stroke="currentColor" stroke-width="2"/>
                `;
            } else {
                icon.innerHTML = `
                    <path d="M1 12S5 4 12 4s11 8 11 8-4 8-11 8S1 12 1 12z" stroke="currentColor" stroke-width="2"/>
                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                `;
            }
        });

        // Form validation and submission
        document.getElementById('register-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('.auth-btn');
            const originalText = submitBtn.querySelector('span').textContent;
            
            // Validate passwords match
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (password !== confirmPassword) {
                alert('Les mots de passe ne correspondent pas');
                return;
            }
            
            // Loading state
            submitBtn.classList.add('loading');
            submitBtn.querySelector('span').textContent = 'Cr√©ation du compte...';
            submitBtn.disabled = true;
            
            // Get form data
            const formData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                level: document.getElementById('level').value,
                password: password,
                newsletter: document.getElementById('newsletter').checked
            };
            
            try {
                // Simulate API call
                const response = await fetch('https://evolutia-back.onrender.com/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    // Success state
                    submitBtn.classList.remove('loading');
                    submitBtn.classList.add('success');
                    submitBtn.querySelector('span').textContent = 'Compte cr√©√© !';
                    
                    // Show success message
                    const successMessage = document.createElement('div');
                    successMessage.className = 'success-message';
                    successMessage.innerHTML = `
                        <div class="success-content">
                            <span class="success-icon">üéâ</span>
                            <span>Bienvenue ! Redirection vers votre espace...</span>
                        </div>
                    `;
                    this.appendChild(successMessage);
                    
                    // Store token and redirect
                    localStorage.setItem('token', data.token);
                    
                    setTimeout(() => {
                        window.location.href = '/index.html';
                    }, 2000);
                } else {
                    throw new Error('Erreur lors de la cr√©ation du compte');
                }
            } catch (error) {
                // Error state
                submitBtn.classList.remove('loading');
                submitBtn.classList.add('error');
                submitBtn.querySelector('span').textContent = 'Erreur lors de l\'inscription';
                
                // Show error message
                const errorMessage = document.createElement('div');
                errorMessage.className = 'error-message';
                errorMessage.innerHTML = `
                    <div class="error-content">
                        <span class="error-icon">‚ö†Ô∏è</span>
                        <span>${error.message}</span>
                    </div>
                `;
                this.appendChild(errorMessage);
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    submitBtn.classList.remove('error');
                    submitBtn.querySelector('span').textContent = originalText;
                    submitBtn.disabled = false;
                    errorMessage.remove();
                }, 3000);
            }
        });

        // Input focus effects
        document.querySelectorAll('.input-container input, .input-container select').forEach(input => {
            input.addEventListener('focus', () => {
                input.parentElement.classList.add('focused');
            });
            
            input.addEventListener('blur', () => {
                if (!input.value) {
                    input.parentElement.classList.remove('focused');
                }
            });
            
            // Check if input has value on load
            if (input.value) {
                input.parentElement.classList.add('focused');
            }
        });

        // Social login handlers
        document.querySelectorAll('.social-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const provider = btn.className.split(' ')[1];
                alert(`Inscription avec ${provider} - Fonctionnalit√© bient√¥t disponible !`);
            });
        });
    </script>
</body>
</html>